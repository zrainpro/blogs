(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a5e649b"],{"2f9e":function(e,t,n){},"31b7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("h1",{staticClass:"manage-title"},[e._v("菜单管理")]),n("div",[n("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){return e.addMenu()}}},[e._v("追加")]),n("el-button",{attrs:{type:"success",plain:"",size:"small"},on:{click:function(t){return e.save()}}},[e._v("保存")])],1),n("div",{staticClass:"menu-box"},e._l(e.menu,(function(t,a){return n("div",{key:a},[n("div",{staticClass:"menu-item"},[n("Label",{attrs:{name:"菜单名"}},[n("el-input",{attrs:{size:"small"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),n("Label",{attrs:{name:"地址"}},[n("el-input",{attrs:{size:"small"},model:{value:t.address,callback:function(n){e.$set(t,"address",n)},expression:"item.address"}})],1),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.addMenu(t)}}},[e._v("添加子节点")]),t._id?n("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"启用","inactive-text":"禁用"},on:{change:function(n){return e.changeStatus(n,t)}},model:{value:t.disabled,callback:function(n){e.$set(t,"disabled",n)},expression:"item.disabled"}}):e._e()],1),t.children?n("div",{staticClass:"menu-children"},e._l(t.children,(function(t,a){return n("div",{key:a,staticClass:"menu-item"},[n("Label",{attrs:{name:"菜单名"}},[n("el-input",{attrs:{size:"small"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"it.name"}})],1),n("Label",{attrs:{name:"地址"}},[n("el-input",{attrs:{size:"small"},model:{value:t.address,callback:function(n){e.$set(t,"address",n)},expression:"it.address"}})],1),t._id?n("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"启用","inactive-text":"禁用"},on:{change:function(n){return e.changeStatus(n,t)}},model:{value:t.disabled,callback:function(n){e.$set(t,"disabled",n)},expression:"it.disabled"}}):e._e()],1)})),0):e._e()])})),0)])},s=[],i=(n("7db0"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"label"},[n("div",{class:"label-name "+(e.required?"label-required":"")},[e._v(e._s(e.name))]),e._t("default")],2)}),c=[],l=(n("d3b7"),n("25f0"),{name:"label-self",props:{name:{type:String,default:""},required:{type:Boolean,default:!0},msg:{type:String,default:""}},methods:{blur:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){console.log(blur)}))}}),u=l,r=(n("9c0d"),n("2877")),d=Object(r["a"])(u,i,c,!1,null,"4c9a1e1e",null),o=d.exports,m={name:"manageMenu",components:{Label:o},data:function(){return{menu:[]}},mounted:function(){this.getMenuData()},methods:{getMenuData:function(){var e=this;this.apiGet("/api/category/list/all").then((function(t){200===t.code&&(e.menu=t.data)}))},addMenu:function(e){e?(!e.children&&(e.children=[]),e.children.push({name:"",address:"",disabled:0}),this.menu=JSON.parse(JSON.stringify(this.menu))):this.menu.push({name:"",address:"",disabled:0})},save:function(){var e=this,t=!1;this.menu.find((function(e){return e.name&&e.address?(e.children&&e.children.find((function(e){if(!e.name||!e.address)return t=!0,!0})),t):(t=!0,!0)})),t?this.$message.error("请填写完整在保存"):this.apiPost("/api/category/patch",{category:this.menu}).then((function(t){200===t.code&&(e.$message.success("保存成功"),e.getMenuData())}))},changeStatus:function(e,t){var n=this;this.apiPost("/api/category/".concat(t._id,"/status"),{disabled:e}).then((function(t){200===t.code&&n.$message.success("".concat(e?"禁用":"启用","成功"))}))}}},f=m,h=(n("d462"),Object(r["a"])(f,a,s,!1,null,"1dadeb6e",null));t["default"]=h.exports},"9c0d":function(e,t,n){"use strict";n("2f9e")},c8fc:function(e,t,n){},d462:function(e,t,n){"use strict";n("c8fc")}}]);